(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1291:function(e,t,a){},1292:function(e,t,a){"use strict";a.r(t);a(557);var n=a(554),r=a(0),o=a.n(r),s=a(12),c=a.n(s),i=a(550),l=(a(68),a(26)),u=(a(108),a(31)),d=(a(99),a(38)),p=(a(131),a(8)),m=(a(88),a(32)),f=a(14),g=a.n(f),h=a(20),y=(a(570),a(346)),v=a.n(y),b="POST",w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise(function(n,r){("GET"===a?v.a.get(e,{params:t}):v.a.post(e,t)).then(function(e){n(e.data)}).catch(function(e){m.a.error("\u8bf7\u6c42\u51fa\u9519\u4e86:"+e.message)})})},E=a(536),k=a.n(E),S=function(e,t){return w("/login",{username:e,password:t},b)},C=function(e){return w("/register",e,b)},x=function(e){return w("/deleteStaff",e)},O=function(e){return w("/updateStaff",e,b)},j=function(e){return w("/updataStaffAvatar",e,b)},N=function(){return w("/productCategory/list")},I=function(e){return w("/productCategory/add",{categoryName:e},b)},_=function(e,t){return w("/productCategory/update",{firstId:e,categoryName:t},b)},P=function(e){return w("/productCategory/delete",{firstId:e})},T=function(e){return w("/productSecondaryCategory/list",{firstId:e})},A=function(e,t){return w("/productSecondaryCategory/add",{firstId:e,secondaryCategoryName:t},b)},M=function(e,t){return w("/productSecondaryCategory/update",{secondaryId:e,secondaryCategoryName:t},b)},R=function(e){return w("/productSecondaryCategory/delete",{secondaryId:e})},F=function(e){return w("/productSecondaryCategory/findSecondaryId",e,b)},U=function(e,t){return w("/products/list",{currentPage:e,pageSize:t})},D=function(e,t){return w("/product/updateStatus",{goods_id:e,goods_status:t},b)},K=function(e,t,a,n){return w("/product/sorter",{currentPage:e,pageSize:t,sorterKeyWord:a,sorterType:n})},L=function(e){return w("/product/conditionSearch",e,b)},z=function(e){return w("/product/searchAndSort",e,b)},V=function(e){return w("/product/deleteProduct",e)},W=function(e){return w("/user/searchById",e)},q=function(e){return w("/product/media/delete",e,b)},B=function(e){return w("/product/addProduct",e,b)},J=function(e){return w("/product/updateProduct",e,b)},Q=function(){return w("/role/list")},$=function(e){return w("/role/add",e,b)},G=function(e){return w("/role/addPermission",e,b)},Z=function(e){return w("/role/deleteRole",{roleId:e},b)},H=function(){return w("/staff/list")},Y=function(){return w("/homedata")},X=function(e){var t="http://api.map.baidu.com/telematics/v3/weather?location=".concat(e,"&output=json&ak=3p49MVra6urFRGOT9s8UBWr2");return new Promise(function(e,a){k()(t,{},function(t,a){if(t||"success"!==a.status)m.a.error("\u8bf7\u6c42\u51fa\u9519\u4e86:"+t);else{var n=a.results[0].weather_data[0],r=n.dayPictureUrl,o=n.weather;e({dayPictureUrl:r,weather:o})}})})},ee=a(128),te={saveStaff:function(e){localStorage.setItem("userkey",JSON.stringify(e))},getStaff:function(){return JSON.parse(localStorage.getItem("userkey"))||{}},removeStaff:function(){localStorage.removeItem("userkey")}},ae={saveStaff:function(e){sessionStorage.setItem("userkey",JSON.stringify(e))},getStaff:function(){return JSON.parse(sessionStorage.getItem("userkey"))||{}},removeStaff:function(){sessionStorage.removeItem("userkey")}},ne=u.a.create({name:"normal_login"})(function(e){var t=function(e,t){m.a.error(e,t)},a=function(){var e=Object(h.a)(g.a.mark(function e(t,a,n){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=5;break}throw new Error("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a");case 5:if(/^[\w@]{4,10}$/.test(a)){e.next=7;break}throw new Error("\u5bc6\u7801\u4ec5\u542b\u6570\u5b57\u5b57\u6bcd_@,4-10\u4f4d)");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,a,n){return e.apply(this,arguments)}}(),n=e.form.getFieldDecorator;return ae.getStaff().staff?o.a.createElement(ee.a,{to:"/"}):o.a.createElement("div",{className:"login clearmargin"},o.a.createElement("div",{className:"mallmanasys-info"},o.a.createElement("h1",null,"\u4e8c\u624b\u5546\u57ce\u7ba1\u7406\u7cfb\u7edf"),o.a.createElement("p",{className:"mallmanasys-alias"},"Second-hand mall management system"),o.a.createElement("p",{className:"mallmanasys-author"},"\u2014 \u9b4f\u7434")),o.a.createElement(u.a,{onSubmit:function(a){a.preventDefault(),e.form.validateFields(function(){var a=Object(h.a)(g.a.mark(function a(n,r){var o,s,c;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=r.username,s=r.password,n){a.next=6;break}return a.next=4,S(o,s);case 4:0===(c=a.sent).status?(te.saveStaff(c.data),ae.saveStaff(c.data),e.history.replace("/")):t(c.msg,2);case 6:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())},className:"login-form"},o.a.createElement(u.a.Item,null,n("username",{rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^[\u4E00-\u9FA5\w@]+$/,message:"\u7528\u6237\u540d\u4ec5\u542b\u6570\u5b57\u5b57\u6bcd\u4e2d\u6587\u5b57\u7b26_@"}],initialValue:"root"})(o.a.createElement(d.a,{prefix:o.a.createElement(p.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),o.a.createElement(u.a.Item,null,n("password",{rules:[{validator:a}],initialValue:"root"})(o.a.createElement(d.a.Password,{placeholder:"input password",prefix:o.a.createElement(p.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),o.a.createElement(u.a.Item,{className:"login-btn"},o.a.createElement(l.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55"))))}),re=(a(534),a(266)),oe=(a(386),a(263)),se=a(21),ce=a(22),ie=a(24),le=a(23),ue=a(25),de=(a(707),a(208));function pe(e){return e.exact?o.a.createElement(ee.b,{path:e.path,exact:!0,render:function(t){return o.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}}):o.a.createElement(ee.b,{path:e.path,render:function(t){return o.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}a(709);var me=a(154),fe=[{title:"\u9996\u9875",key:"/home",icon:"home",isPublic:!0},{title:"\u5546\u54c1",key:"/products",icon:"appstore",children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/products/category",icon:"bars"},{title:"\u5546\u54c1\u7ba1\u7406",key:"/products/product",icon:"tool"}]},{title:"\u5458\u5de5\u7ba1\u7406",key:"/user",icon:"user"},{title:"\u6743\u9650\u8bbe\u7f6e",key:"/role",icon:"safety"},{title:"\u53ef\u89c6\u5316\u6570\u636e",key:"/charts",icon:"area-chart",children:[{title:"\u67f1\u5f62\u56fe",key:"/charts/bar",icon:"bar-chart"},{title:"\u6298\u7ebf\u56fe",key:"/charts/line",icon:"line-chart"},{title:"\u997c\u56fe",key:"/charts/pie",icon:"pie-chart"}]},{title:"\u5730\u5740",key:"/address",icon:"environment"}],ge=a(113),he=(a(711),me.a.SubMenu),ye=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){a.setState({str:e})},a.hasAuth=function(e){var t=e.key;return-1!==ae.getStaff().menus.indexOf(t)},a.getMenuNodes=function(e){var t=a.props.location.pathname;return e.reduce(function(e,n){a.hasAuth(n)&&(n.children?(n.children.find(function(e){return 0===t.indexOf(e.key)})&&(a.openKey=n.key),e.push(o.a.createElement(he,{key:n.key,title:o.a.createElement("span",null,o.a.createElement(p.a,{type:n.icon}),o.a.createElement("span",null,n.title))},a.getMenuNodes(n.children)))):e.push(o.a.createElement(me.a.Item,{key:n.key},o.a.createElement(ge.b,{to:n.key},o.a.createElement(p.a,{type:n.icon}),o.a.createElement("span",null," ",n.title)))));return e},[])},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){this.menuNodes=this.getMenuNodes(fe)}},{key:"render",value:function(){var e=this.props.location.pathname;0===e.indexOf("/products/product")&&(e="/products/product");var t=this.openKey;return o.a.createElement("div",null,o.a.createElement(me.a,{theme:"dark",mode:"inline",className:"nav",defaultOpenKeys:[t],selectedKeys:[e]},this.menuNodes))}}]),t}(r.Component),ve=Object(ee.g)(ye),be=(a(136),a(61));a(721);function we(e){return o.a.createElement("button",Object.assign({},e,{className:"link-button"}))}a(722);function Ee(e){return e>=10?e:"0"+e}var ke=function(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+""+Ee(t.getMonth()+1)+Ee(t.getDate())},Se=function(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+Ee(t.getMonth()+1)+"-"+Ee(t.getDate())+" "+Ee(t.getHours())+":"+Ee(t.getMinutes())+":"+Ee(t.getSeconds())},Ce=be.a.confirm,xe=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).state={dayPictureUrl:"",weather:"",currentTime:Se(Date.now())},a.logOut=function(){var e=a.props.history;Ce({title:"\u662f\u5426\u786e\u5b9a\u9000\u51fa\u7cfb\u7edf?",okText:"\u786e\u5b9a",okType:"primary",cancelText:"\u53d6\u6d88",className:"logoutconfirm",width:280,onOk:function(){ae.removeStaff(),te.removeStaff(),e.replace("/login")}})},a.do_something=function(e,t){console.log(e,t)},a.getCityWeather=function(){(new window.BMap.LocalCity).get(function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t.name);case 2:n=e.sent,r=n.dayPictureUrl,o=n.weather,a.setState({dayPictureUrl:r,weather:o});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},a.getTime=function(){var e=Date.now();a.setState({currentTime:Se(e)})},a.getTitle=function(e){var t={title:"",isFindTitle:!1},n=a.props.location.pathname;return e.forEach(function(e){e.key===n?(t.title=e.title,t.isFindTitle=!0):e.children&&!t.isFindTitle&&(t=a.getTitle(e.children))}),t},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval(function(){e.getTime()},1e3),this.getCityWeather()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.getTitle(fe);0===this.props.location.pathname.indexOf("/products/product")&&(e={isFindTitle:!0,title:"\u5546\u54c1\u7ba1\u7406"});var t=this.state,a=t.currentTime,n=t.dayPictureUrl,r=t.weather;return o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"header-top"},o.a.createElement("span",null,"\u6b22\u8fce,"),o.a.createElement("span",null,ae.getStaff().staff.username),o.a.createElement(we,{onClick:this.logOut},"\u9000\u51fa")),o.a.createElement("div",{className:"header-bottom"},o.a.createElement("div",{className:"header-bottom-left"},e.title),o.a.createElement("div",{className:"header-bottom-right"},o.a.createElement("span",null,a),o.a.createElement("img",{src:n,alt:"weather"}),o.a.createElement("span",null,r))))}}]),t}(r.Component),Oe=Object(ee.g)(xe),je=(a(723),a(388),a(129)),Ne=(a(389),a(72)),Ie=(a(724),function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(je.a,{className:"not-found"},o.a.createElement(Ne.a,{span:12,className:"left"}),o.a.createElement(Ne.a,{span:12,className:"right"},o.a.createElement("h1",null,"404"),o.a.createElement("h2",null,"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"),o.a.createElement("div",null,o.a.createElement(l.a,{type:"primary",onClick:function(){return e.props.history.replace("/home")}},"\u56de\u5230\u9996\u9875"))))}}]),t}(r.Component)),_e=6,Pe="http://106.14.121.224:7777/upload/",Te=de.a.Content,Ae=de.a.Sider,Me=function(e){function t(e){var a;Object(se.a)(this,t),(a=Object(ie.a)(this,Object(le.a)(t).call(this,e))).onCollapse=function(e){a.setState({collapsed:e})},a.uploadAvatar=function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r,o,s,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("done"!==t.file.status){e.next=12;break}if(n=t.file.response,a.setState({avatarUrl:n.data.fileName}),0!==n.status){e.next=12;break}return r=ae.getStaff().staff,o=r.staffId,s=r.avatar,c=n.data.fileName,e.next=8,q({fileName:s});case 8:return e.next=10,j({staffId:o,avatar:c});case 10:0===e.sent.status?(ae.getStaff().staff.avatar=c,te.getStaff().staff.avatar=c,m.a.success("\u4fee\u6539\u5934\u50cf\u6210\u529f!")):m.a.success("\u4fee\u6539\u5934\u50cf\u5931\u8d25!");case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n,r=ae.getStaff().staff;return n=r?r.avatar:"",a.state={collapsed:!1,avatarUrl:n},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"beforeUpload",value:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||m.a.error("\u8bf7\u9009\u62e9\u56fe\u7247\u6587\u4ef6");var a=e.size/1024/1024<10;return a||m.a.error("\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc710M"),t&&a}},{key:"render",value:function(){var e=ae.getStaff();if("{}"===JSON.stringify(e))return o.a.createElement(ee.a,{to:"/login"});var t=this.props.routes,a=ae.getStaff().menus,n=[],r=!0,s=!1,c=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,d=!0,p=!1,m=void 0;try{for(var f,g=a[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var h=f.value;u.path===h&&n.push(u)}}catch(v){p=!0,m=v}finally{try{d||null==g.return||g.return()}finally{if(p)throw m}}}}catch(v){s=!0,c=v}finally{try{r||null==l.return||l.return()}finally{if(s)throw c}}var y=this.state.avatarUrl;return o.a.createElement(de.a,{className:"mall-layout "},o.a.createElement(Ae,{breakpoint:"md",collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,className:"sider"},o.a.createElement("div",{className:"logo"},o.a.createElement(re.a,{action:"/product/img/upload",accept:"image/*",name:"image",showUploadList:!1,beforeUpload:this.beforeUpload,onChange:this.uploadAvatar},o.a.createElement(oe.a,{size:64,src:Pe+y}))),o.a.createElement(ve,null)),o.a.createElement(de.a,{className:"content-layout "},o.a.createElement(Oe,null),o.a.createElement(Te,{className:"content-body clearmargin"},o.a.createElement(ee.d,null,o.a.createElement(ee.a,{exact:!0,from:"/",to:"/home"}),n.map(function(e,t){return o.a.createElement(pe,Object.assign({},e,{key:t}))}),o.a.createElement(ee.b,{component:Ie})))))}}]),t}(r.Component),Re=(a(95),a(34)),Fe=(a(767),function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).state={productCount:0,staffCount:0,categoryCount:0},a.getCount=Object(h.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:0===(t=e.sent).status?a.setState({productCount:t.data.productCount,staffCount:t.data.staffCount,categoryCount:t.data.categoryCount}):m.a.error(t.msg);case 4:case"end":return e.stop()}},e)})),a.goProduct=function(){a.props.history.push("/products/product")},a.goStaff=function(){a.props.history.push("/user")},a.goCategory=function(){a.props.history.push("/products/category")},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){this.getCount()}},{key:"render",value:function(){var e={width:"25%",textAlign:"center",height:"160px",display:"flex",flexDirection:"column",justifyContent:"center"},t=this.state,a=t.productCount,n=t.staffCount,r=t.categoryCount;return o.a.createElement(Re.a,{className:"home",bodyStyle:{display:"flex",justifyContent:"space-between",backgroundColor:"#f0f2f5"},bordered:!1},o.a.createElement(Re.a.Grid,{style:e,className:"grid",onClick:this.goProduct},o.a.createElement("span",null,o.a.createElement("p",{className:"count"},a),o.a.createElement("p",{className:"desc"},o.a.createElement(p.a,{type:"shop"}),"\xa0\xa0",o.a.createElement("span",null,"\u5546\u54c1\u603b\u6570")))),o.a.createElement(Re.a.Grid,{style:e,className:"grid",onClick:this.goStaff},o.a.createElement("span",null,o.a.createElement("p",{className:"count"},n),o.a.createElement("p",{className:"desc"},o.a.createElement(p.a,{type:"user"}),"\xa0\xa0",o.a.createElement("span",null,"\u5458\u5de5\u603b\u6570")))),o.a.createElement(Re.a.Grid,{style:e,className:"grid",onClick:this.goCategory},o.a.createElement("span",null,o.a.createElement("p",{className:"count"},r),o.a.createElement("p",{className:"desc"},o.a.createElement(p.a,{type:"inbox"}),"\xa0\xa0",o.a.createElement("span",null,"\u5206\u7c7b\u603b\u6570")))))}}]),t}(r.Component)),Ue=(a(253),a(124));var De=u.a.create()(function(e){var t=e.form.getFieldDecorator,a=e.categoryTitle;return(0,e.getForm)(e.form),o.a.createElement(u.a,null,o.a.createElement(u.a.Item,null,o.a.createElement(d.a,{value:a,disabled:!0})),o.a.createElement(u.a.Item,null,t("categoryName",{rules:[{required:!0,message:"\u54c1\u7c7b\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:""})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u54c1\u7c7b\u540d\u79f0"}))))});var Ke=u.a.create()(function(e){var t=e.form.getFieldDecorator,a=e.getUpdateForm,n=e.categoryName;return a(e.form),o.a.createElement(u.a,null,o.a.createElement(u.a.Item,null,t("categoryName",{rules:[{required:!0,message:"\u54c1\u7c7b\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:n})(o.a.createElement(d.a,null))))}),Le=be.a.confirm,ze=be.a.info,Ve={showUnSelectRowinfo:function(){ze({title:"\u6e29\u99a8\u63d0\u793a",content:o.a.createElement("div",null,"\u8bf7\u5148\u9009\u62e9\u67d0\u884c\u6570\u636e"),okText:"\u5173\u95ed",width:330})},confirmModel:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"primary",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\u786e\u5b9a",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"\u53d6\u6d88",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:260;Le({title:e,okText:n,okType:a,cancelText:r,className:"logoutconfirm",width:o,onOk:function(){t()}})}},We={showTotal:function(e){return"\u5171".concat(e,"\u6761")},showCurrentPage:function(e,t){return Math.ceil(e/t)}},qe=(a(779),function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,categorys:[],isFirstLevelCategory:!0,firstLevelCategoryName:"",firstLevelCategoryKey:"",firstLevelCategoryPage:1,selectedRowKey:"",currentPage:1,modalVisible:0},a.initColumns=function(){a.columns=[{title:"\u54c1\u7c7b\u7f16\u53f7",dataIndex:"id",width:"40%"},{title:"\u54c1\u7c7b\u540d\u79f0",dataIndex:"name"}]},a.setSelectedRowKey=function(e){a.setState({selectedRowKey:e.id}),a.categoryName=e.name},a.paginationChange=function(e){a.setState({currentPage:e,selectedRowKey:""}),a.categoryName=""},a.getCategorys=Object(h.a)(g.a.mark(function e(){var t,n,r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({loading:!0}),t=a.state,n=t.isFirstLevelCategory,r=t.firstLevelCategoryKey,!n){e.next=8;break}return e.next=5,N();case 5:o=e.sent,e.next=11;break;case 8:return e.next=10,T(r);case 10:o=e.sent;case 11:0===o.status&&a.setState({loading:!1,categorys:o.data});case 12:case"end":return e.stop()}},e)})),a.handleCancel=function(e){a.setState({modalVisible:0}),a.form.resetFields()},a.showAddCategoryModal=function(){a.setState({modalVisible:1})},a.addCategory=function(e){e.preventDefault(),a.form.validateFields(function(){var e=Object(h.a)(g.a.mark(function e(t,n){var r,o,s,c,i,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=13;break}if(r=a.state,o=r.isFirstLevelCategory,s=r.firstLevelCategoryKey,c=n.categoryName,!o){e.next=9;break}return e.next=6,I(c);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,A(s,c);case 11:i=e.sent;case 12:0===i.status?(a.categoryName=i.data.name,l=We.showCurrentPage(a.state.categorys.length+1,_e),a.getCategorys(),a.setState({modalVisible:0,selectedRowKey:i.data.id,currentPage:l}),a.form.resetFields()):m.a.error(i.msg);case 13:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.validateCategoryNameUnique=function(e){var t=a.state.categorys,n=!0,r=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){if(s.value.name===e)return m.a.error("\u54c1\u7c7b\u540d\u91cd\u590d\uff0c\u8bf7\u66f4\u6362\u5176\u4f59\u54c1\u7c7b\u540d"),!1}}catch(i){r=!0,o=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return!0},a.ShowupdateCategory=function(){a.categoryName?a.setState({modalVisible:2}):Ve.showUnSelectRowinfo()},a.updateCategory=function(e){e.preventDefault();var t=a.state,n=t.selectedRowKey,r=t.isFirstLevelCategory;a.form.validateFields(function(){var e=Object(h.a)(g.a.mark(function e(t,o){var s,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=o.categoryName,t){e.next=19;break}if(s===a.categoryName){e.next=18;break}if(!a.validateCategoryNameUnique(s)){e.next=16;break}if(!r){e.next=10;break}return e.next=7,_(n,s);case 7:c=e.sent,e.next=13;break;case 10:return e.next=12,M(n,s);case 12:c=e.sent;case 13:0===c.status&&(a.getCategorys(),a.categoryName=s),a.setState({modalVisible:0}),a.form.resetFields();case 16:e.next=19;break;case 18:a.setState({modalVisible:0});case 19:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.deleteCategory=function(){var e=a.state,t=e.selectedRowKey,n=e.isFirstLevelCategory;if(a.categoryName){var r="\u786e\u5b9a\u5220\u9664\u54c1\u7c7b".concat(a.categoryName,"?");Ve.confirmModel(r,Object(h.a)(g.a.mark(function e(){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!n){e.next=7;break}return e.next=4,P(t);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,R(t);case 9:r=e.sent;case 10:0===r.status&&(a.getCategorys(),a.categoryName="",a.setState({selectedRowKey:""}));case 11:case"end":return e.stop()}},e)})))}else Ve.showUnSelectRowinfo()},a.findSecondaryCategory=function(){if(a.categoryName){var e=a.state,t=e.selectedRowKey,n=e.currentPage;a.setState({isFirstLevelCategory:!1,firstLevelCategoryKey:t,firstLevelCategoryName:a.categoryName,selectedRowKey:"",firstLevelCategoryPage:n,currentPage:1},function(){a.getCategorys(),a.categoryName=""})}else Ve.showUnSelectRowinfo()},a.showCategorys=function(){var e=a.state,t=e.firstLevelCategoryKey,n=e.firstLevelCategoryName,r=e.firstLevelCategoryPage;a.setState({isFirstLevelCategory:!0,selectedRowKey:t,currentPage:r},function(){a.getCategorys(),a.categoryName=n})},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalVisible,n=t.isFirstLevelCategory,r=t.categorys,s=t.firstLevelCategoryName,c=t.selectedRowKey,i=t.loading,u=t.currentPage,d=n?"\u4e00\u7ea7\u54c1\u7c7b\u5217\u8868":s,m=n?"\u4e00\u7ea7\u54c1\u7c7b\u5217\u8868":o.a.createElement("span",null,o.a.createElement(we,{onClick:this.showCategorys},"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"),o.a.createElement(p.a,{type:"arrow-right",style:{marginRight:5}}),o.a.createElement("span",null,s)),f={selectedRowKeys:[c],type:"radio",onSelect:function(t){e.setState({selectedRowKey:t.id})}},g=n?"visible":"hidden",h=o.a.createElement(l.a,{type:"primary",icon:"plus",onClick:this.showAddCategoryModal},"\u6dfb\u52a0"),y=o.a.createElement("div",null,o.a.createElement(l.a,{type:"primary",onClick:this.ShowupdateCategory},"\u4fee\u6539"),o.a.createElement(l.a,{type:"danger",onClick:this.deleteCategory},"\u5220\u9664"),o.a.createElement(l.a,{type:"primary",onClick:this.findSecondaryCategory,style:{visibility:g}},"\u67e5\u770b\u5b50\u5206\u7c7b"));return o.a.createElement(Re.a,{title:m,extra:h,className:"category"},o.a.createElement(Re.a,{title:y,headStyle:{border:"1px solid #e8e8e8"},bodyStyle:{padding:"0px"},bordered:!1,className:"category-card"},o.a.createElement(Ue.a,{bordered:!0,rowKey:"id",rowSelection:f,columns:this.columns,dataSource:r,loading:i,pagination:{size:"small",defaultPageSize:_e,showQuickJumper:!0,showSizeChanger:!0,current:u,pageSizeOptions:[""+_e,""+2*_e,""+3*_e,""+4*_e],showTotal:We.showTotal,onChange:this.paginationChange},onRow:function(t){return{onClick:function(){e.setSelectedRowKey(t)}}}}),o.a.createElement(be.a,{title:"\u66f4\u65b0\u54c1\u7c7b",visible:2===a,onOk:this.updateCategory,onCancel:this.handleCancel},o.a.createElement(Ke,{categoryName:this.categoryName,getUpdateForm:function(t){e.form=t}}))),o.a.createElement(be.a,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:1===a,onOk:this.addCategory,onCancel:this.handleCancel},o.a.createElement(De,{categoryTitle:d,getForm:function(t){e.form=t}})))}}]),t}(r.Component)),Be=function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.routes;return o.a.createElement(ee.d,null,o.a.createElement(ee.a,{exact:!0,from:"/products/product",to:"/products/product/showproduct"}),e.map(function(e,t){return o.a.createElement(pe,Object.assign({},e,{key:t}))}),o.a.createElement(ee.b,{component:Ie}))}}]),t}(r.Component),Je=a(71),Qe=(a(416),a(178)),$e=(a(533),a(177)),Ge=(a(800),a(352)),Ze=(a(229),a(67)),He=Ze.a.Option,Ye=u.a.create()(function(e){var t=e.categorys,a=void 0===t?[]:t,n=e.searchProduct,r=e.form,s=e.getSearchForm,c=e.resetFields,i=r.getFieldDecorator;s(r);return o.a.createElement(u.a,Object.assign({layout:"inline"},{labelCol:{xs:{span:7}},wrapperCol:{xs:{span:17}}}),o.a.createElement(u.a.Item,{label:"\u67e5\u8be2\u54c1\u7c7b"},i("searchCategory",{initialValue:"allCategory"})(o.a.createElement(Ze.a,{style:{width:160}},o.a.createElement(He,{value:"allCategory"},"\u5168\u90e8"),a.map(function(e){return o.a.createElement(He,{value:e.id,key:e},e.name)})))),o.a.createElement(u.a.Item,{label:"\u67e5\u8be2\u65b9\u5f0f"},i("searchWays",{initialValue:"goods_title"})(o.a.createElement(Ze.a,{style:{width:160}},o.a.createElement(He,{value:"goods_title"},"\u6309\u5546\u54c1\u540d\u79f0\u67e5\u8be2"),o.a.createElement(He,{value:"goods_description"},"\u6309\u5546\u54c1\u8be6\u60c5\u67e5\u8be2")))),o.a.createElement(u.a.Item,null,i("searchInputMsg",{})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u67e5\u8be2\u5185\u5bb9"}))),o.a.createElement(u.a.Item,null,o.a.createElement(l.a,{type:"primary",icon:"search",onClick:n,htmlType:"submit"},"\u67e5\u8be2")),o.a.createElement(u.a.Item,null,o.a.createElement(l.a,{onClick:c},"\u91cd\u7f6e")))}),Xe=Ge.a.CheckableTag,et=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).state={categorys:[],total:0,loading:!1,products:[],currentPage:1,searchValues:{},sorterKeyWord:"",sorterType:"",pageSize:6},a.initColumns=function(){a.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"goods_title",align:"center"},{title:"\u5546\u54c1\u63cf\u8ff0",width:"35%",dataIndex:"goods_description",align:"center"},{title:"\u5546\u54c1\u54c1\u7c7b",dataIndex:"goods_first_categoryName",align:"center"},{title:"\u4ef7\u683c",dataIndex:"goods_price",key:"price",sorter:!0,render:function(e){return"\xa5"+e},align:"center"},{title:"\u70b9\u51fb\u91cf",dataIndex:"goods_hot",key:"hot",align:"center",sorter:!0,editable:!0,render:function(e){return o.a.createElement(Ge.a,null,e)}},{title:"\u72b6\u6001",dataIndex:"goods_status",key:"status",align:"center",render:function(e,t){var n=e?"\u4e0b\u67b6":"\u4e0a\u67b6",r=e?"\u4e0a\u67b6":"\u4e0b\u67b6",s=!e;return o.a.createElement($e.a,{title:"\u786e\u5b9a".concat(r).concat(t.goods_title,"\u5546\u54c1\u5417?"),onConfirm:function(){return a.updateProdudctStatus(t.goods_id,s)},className:"popconfirm"},o.a.createElement("span",null,o.a.createElement(Xe,{checked:s,style:{cursor:"point"}},n)))}},{title:"\u64cd\u4f5c",key:"action",align:"center",render:function(e,t){return o.a.createElement("span",null,o.a.createElement(we,{onClick:function(){return a.showDetail(t)}},"\u8be6\u60c5"),o.a.createElement(Qe.a,{type:"vertical"}),o.a.createElement(we,{onClick:function(){return a.showUpdate(t)}},"\u4fee\u6539"),o.a.createElement(Qe.a,{type:"vertical"}),o.a.createElement($e.a,{title:"\u786e\u5b9a\u5220\u9664\u5546\u54c1".concat(t.goods_title,"\u5417?"),onConfirm:function(){return a.deleteProduct(t.goods_id)}},o.a.createElement(we,null,"\u5220\u9664")))}}]},a.showDetail=function(e){sessionStorage.setItem("product",JSON.stringify(e)),a.props.history.push("/products/product/productdetail")},a.showUpdate=function(e){sessionStorage.setItem("product",JSON.stringify(e)),a.props.history.push("/products/product/editproduct")},a.getAllCategory=Object(h.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:0===(t=e.sent).status&&a.setState({categorys:t.data});case 4:case"end":return e.stop()}},e)})),a.getProducts=function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r,o,s,c,i,l,u,d;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({loading:!0,currentPage:t}),n=a.state,r=n.searchValues,o=n.sorterKeyWord,s=n.sorterType,c=n.pageSize,"{}"===JSON.stringify(r)||"allCategory"===r.searchCategory&&!r.searchInputMsg){e.next=14;break}if(!o||!s){e.next=9;break}return e.next=6,z(Object(Je.a)({currentPage:t,pageSize:c,sorterKeyWord:o,sorterType:s},r));case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,L(Object(Je.a)({currentPage:t,pageSize:c},r));case 11:i=e.sent;case 12:e.next=23;break;case 14:if(!o||!s){e.next=20;break}return e.next=17,K(t,c,o,s);case 17:i=e.sent,e.next=23;break;case 20:return e.next=22,U(t,c);case 22:i=e.sent;case 23:a.setState({loading:!1}),0===i.status&&(l=i.data,u=l.total,d=l.products,a.setState({products:d,total:u}));case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.updateProdudctStatus=function(){var e=Object(h.a)(g.a.mark(function e(t,n){var r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.currentPage,o=n?1:0,e.next=4,D(t,o);case 4:0===e.sent.status&&a.getProducts(r);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.searchProduct=function(e){e.preventDefault(),a.form.validateFields(function(){var e=Object(h.a)(g.a.mark(function e(t,n){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||a.setState({searchValues:n},function(){a.getProducts(1)});case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.resetfields=function(e){e.preventDefault(),a.form.resetFields(),a.setState({searchValues:{}},function(){a.getProducts(1)})},a.tableOnChange=function(e,t,n){var r,o=n.field;"ascend"===n.order?r="asc":"descend"===n.order&&(r="desc"),a.setState({sorterKeyWord:o,sorterType:r,pageSize:e.pageSize},function(){a.getProducts(e.current)})},a.deleteProduct=function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V({goods_id:t});case 2:0===e.sent.status&&(n=a.state,r=n.currentPage,(n.total-1)%_e||1===r?a.getProducts(r):a.getProducts(r-1));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getAllCategory();var e=sessionStorage.getItem("productCurrentPage");e?this.getProducts(parseInt(e)):this.getProducts(1)}},{key:"componentWillUnmount",value:function(){var e=this.state.currentPage;sessionStorage.setItem("productCurrentPage",e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.categorys,n=t.total,r=t.products,s=t.loading,c=t.currentPage,i=o.a.createElement(Ye,{categorys:a,getSearchForm:function(t){return e.form=t},searchProduct:this.searchProduct,resetFields:this.resetfields}),u=o.a.createElement(l.a,{type:"primary",icon:"plus",onClick:function(){e.props.history.push("/products/product/editproduct")}},"\u6dfb\u52a0\u5546\u54c1");return o.a.createElement("div",null,o.a.createElement(Re.a,{title:i,extra:u,bodyStyle:{padding:0}}),o.a.createElement(Ue.a,{bordered:!0,loading:s,columns:this.columns,dataSource:r,onChange:this.tableOnChange,rowKey:"goods_id",style:{marginTop:20,backgroundColor:"#fff"},pagination:{size:"small",defaultPageSize:_e,total:n,current:c,showSizeChanger:!0,pageSizeOptions:[""+_e,""+2*_e,""+3*_e,""+4*_e],showQuickJumper:!0,showTotal:We.showTotal}}))}}]),t}(r.Component),tt=a(107),at=a(553),nt=u.a.Item,rt=Ze.a.Option,ot=function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.roles,t=this.props.form.getFieldDecorator;return o.a.createElement(u.a,{labelCol:{span:4},wrapperCol:{span:15}},o.a.createElement(nt,{label:"\u7528\u6237\u540d"},t("username",{rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^[\u4E00-\u9FA5\w@]+$/,message:"\u7528\u6237\u540d\u4ec5\u542b\u6570\u5b57\u5b57\u6bcd\u4e2d\u6587\u5b57\u7b26_@"}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),o.a.createElement(nt,{label:"\u5bc6\u7801"},t("password",{validateTrigger:"onBlur",rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^[\w@]{4,10}$/,message:"\u5bc6\u7801\u4ec5\u542b\u6570\u5b57\u5b57\u6bcd_@,4-10\u4f4d"}]})(o.a.createElement(d.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),o.a.createElement(nt,{label:"\u624b\u673a\u53f7"},t("phone",{validateTrigger:"onBlur",rules:[{required:!0,message:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^1[3456789]\d{9}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),o.a.createElement(nt,{label:"\u90ae\u7bb1"},t("email",{validateTrigger:"onBlur",rules:[{required:!0,message:"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740"}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),o.a.createElement(nt,{label:"\u89d2\u8272"},t("roleId",{initialValue:e[0].roleId})(o.a.createElement(Ze.a,null,e.map(function(e){return o.a.createElement(rt,{key:e.roleId,value:e.roleId},e.roleName)})))))}}]),t}(r.PureComponent),st=u.a.create()(ot),ct=a(547),it=a.n(ct),lt=(a(802),o.a.createContext()),ut=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).getInput=function(){var e=a.props,t=e.roles,n=e.inputType;return"select"===n?o.a.createElement(Ze.a,{style:{width:"100%"}},t.map(function(e){return o.a.createElement(Ze.a.Option,{key:e.roleId,value:String(e.roleId)},e.roleName)})):"password"===n?o.a.createElement(d.a,{type:"password"}):o.a.createElement(d.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,r=n.editing,s=n.dataIndex,c=n.title,i=(n.inputType,n.record),l=(n.index,n.children),d=Object(at.a)(n,["editing","dataIndex","title","inputType","record","index","children"]),p="username"===s?{pattern:/^[\u4E00-\u9FA5\w@]+$/,message:"\u7528\u6237\u540d\u4ec5\u542b\u6570\u5b57\u5b57\u6bcd\u4e2d\u6587\u5b57\u7b26_@"}:{},m="phone"===s?{pattern:/^1[3456789]\d{9}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"}:{},f="email"===s?{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740"}:{},g="password"===s?{pattern:/^[\w@]{4,10}$/,message:"\u5bc6\u7801\u4ec5\u542b\u6570\u5b57\u5b57\u6bcd_@,4-10\u4f4d"}:{};return o.a.createElement("td",d,r?o.a.createElement(u.a.Item,{style:{margin:0}},t(s,{validateTrigger:"onBlur",rules:[{required:!0,message:"".concat(c,"\u4e0d\u80fd\u4e3a\u7a7a!")},p,m,f,g],initialValue:"roleId"!==s?i[s]:String(i[s])})(a.getInput())):l)},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){return o.a.createElement(lt.Consumer,null,this.renderCell)}}]),t}(o.a.Component),dt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(le.a)(t).call(this,e))).initColumns=function(){a.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username",editable:!0,align:"center"},{title:"\u7535\u8bdd",dataIndex:"phone",editable:!0,align:"center"},{title:"\u90ae\u7bb1",dataIndex:"email",editable:!0,align:"center"},{title:"\u5bc6\u7801",dataIndex:"password",align:"center"},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"roleId",editable:!0,align:"center",width:"12%",render:function(e){var t=!0,n=!1,r=void 0;try{for(var o,s=a.state.roles[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var c=o.value;if(String(c.roleId)===String(e))return c.roleName}}catch(i){n=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},{title:"\u64cd\u4f5c",dataIndex:"operation",align:"center",width:"11%",render:function(e,t){var n=""===a.state.editingKey?{}:{color:"#bfbfbf"};return a.isEditing(t)?o.a.createElement("span",null,o.a.createElement(lt.Consumer,null,function(e){return o.a.createElement(we,{onClick:function(){return a.updateStaff(e,t.staffId)}},"\u4fdd\u5b58")}),o.a.createElement(Qe.a,{type:"vertical"}),o.a.createElement($e.a,{title:"\u786e\u5b9a\u53d6\u6d88\u7f16\u8f91\u5417?",onConfirm:function(){return a.cancel(t.staffId)}},o.a.createElement(we,null,"\u53d6\u6d88"))):"root"===t.username?"":o.a.createElement("span",null,o.a.createElement(we,{style:n,onClick:function(){return a.edit(t.staffId)}},"\u7f16\u8f91"),o.a.createElement(Qe.a,{type:"vertical"}),o.a.createElement($e.a,{title:"\u786e\u5b9a\u5220\u9664\u804c\u5458".concat(t.username,"\u5417"),onConfirm:function(){a.deleteStaff(t.staffId)}},o.a.createElement(we,{style:n},"\u5220\u9664")))}}]},a.getStaffs=Object(h.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:0===(t=e.sent).status&&a.setState({staffs:t.data});case 4:case"end":return e.stop()}},e)})),a.getRoles=Object(h.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:0===(t=e.sent).status&&a.setState({roles:t.data});case 4:case"end":return e.stop()}},e)})),a.showAddStaff=function(){a.setState({isShowAddStaff:!0})},a.addStaff=function(){a.form.validateFields(function(){var e=Object(h.a)(g.a.mark(function e(t,n){var r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return r=Se(Date.now()),e.next=4,C(Object(Je.a)({},n,{createTime:r}));case 4:0===(o=e.sent).status?(a.setState({isShowAddStaff:!1}),a.form.resetFields(),m.a.success("\u6dfb\u52a0\u804c\u5458".concat(n.username,"\u6210\u529f")),a.getStaffs()):m.a.error(o.msg);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.deleteStaff=function(){var e=Object(h.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({staffId:t});case 2:0===(n=e.sent).status?a.getStaffs():m.a.error(n.message);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.isEditing=function(e){return e.staffId===a.state.editingKey},a.cancel=function(){a.setState({editingKey:""})},a.updateStaff=function(e,t){e.validateFields(function(){var e=Object(h.a)(g.a.mark(function e(n,r){var o,s,c,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:if(o=Object(tt.a)(a.state.staffs),!((s=o.findIndex(function(e){return t===e.staffId}))>-1)){e.next=11;break}return e.next=7,O({staff:Object(Je.a)({},r),staffId:t});case 7:0===(c=e.sent).status?(i=o[s],r.password=it()(r.password),o.splice(s,1,Object(Je.a)({},i,r)),a.setState({staffs:o,editingKey:""}),m.a.success(c.msg)):m.a.error(c.msg),e.next=13;break;case 11:o.push(r),a.setState({newStaffs:r,editingKey:""});case 13:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.state={staffs:[],editingKey:"",isShowAddStaff:!1,roles:[]},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getStaffs(),this.getRoles()}},{key:"render",value:function(){var e=this,t=this.state,a=t.staffs,n=t.isShowAddStaff,r=t.roles,s=o.a.createElement("span",null,o.a.createElement(l.a,{type:"primary",onClick:this.showAddStaff},"\u521b\u5efa\u804c\u5458"),"\xa0\xa0"),c={body:{cell:ut}},i=this.columns.map(function(t){return t.editable?(a="roleId"===t.dataIndex?"select":"password"===t.dataIndex?"password":"text",Object(Je.a)({},t,{onCell:function(n){return{record:n,roles:Object(tt.a)(r),inputType:a,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(n)}}})):t;var a});return o.a.createElement(Re.a,{title:s},o.a.createElement(lt.Provider,{value:this.props.form},o.a.createElement(Ue.a,{rowKey:"staffId",components:c,bordered:!0,dataSource:a,columns:i,rowClassName:"editable-row",pagination:{onChange:this.cancel}})),o.a.createElement(be.a,{title:"\u6dfb\u52a0\u804c\u5458",visible:n,onOk:this.addStaff,onCancel:function(){e.form.resetFields(),e.setState({isShowAddStaff:!1})}},o.a.createElement(st,{setForm:function(t){return e.form=t},roles:r})))}}]),t}(o.a.Component),pt=u.a.create()(dt),mt=u.a.Item,ft=function(e){function t(){return Object(se.a)(this,t),Object(ie.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.roleName,n=t.isUpdateRoleName?a:"";return o.a.createElement(u.a,null,o.a.createElement(mt,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},{labelCol:{span:4},wrapperCol:{span:15}}),e("roleName",{initialValue:n,rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))))}}]),t}(r.Component),gt=u.a.create()(ft),ht=(a(803),a(351)),yt=u.a.Item,vt=ht.a.TreeNode,bt=function(e){function t(e){var a;Object(se.a)(this,t),(a=Object(ie.a)(this,Object(le.a)(t).call(this,e))).getMenus=function(){return a.state.checkedKeys},a.getTreeNodes=function(e){return e.reduce(function(e,t){return e.push(o.a.createElement(vt,{title:t.title,key:t.key},t.children?a.getTreeNodes(t.children):null)),e},[])},a.onCheck=function(e){a.setState({checkedKeys:e})};var n,r=a.props.role.menus;return n=r?r.split("#"):[],a.state={checkedKeys:n},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){this.treeNodes=this.getTreeNodes(fe)}},{key:"componentWillReceiveProps",value:function(e){var t=e.role.menus;t=t?t.split("#"):[],this.setState({checkedKeys:t})}},{key:"render",value:function(){var e=this.props.role,t=this.state.checkedKeys;return o.a.createElement("div",null,o.a.createElement(yt,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},{labelCol:{span:4},wrapperCol:{span:15}}),o.a.createElement(d.a,{value:e.roleName,disabled:!0})),o.a.createElement(ht.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:t,onCheck:this.onCheck},o.a.createElement(vt,{title:"\u5e73\u53f0\u6743\u9650",key:"all"},this.treeNodes)))}}]),t}(r.PureComponent),wt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(le.a)(t).call(this,e))).state={roles:[],role:{},isShowAdd:!1,isShowAuth:!1,currentPage:1},a.initColumn=function(){a.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName",align:"center"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",align:"center"},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"authTime",align:"center",render:Se},{title:"\u6388\u6743\u4eba",dataIndex:"authName",align:"center"}]},a.getRoles=Object(h.a)(g.a.mark(function e(){var t,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:0===(t=e.sent).status&&(n=t.data,a.setState({roles:n}));case 4:case"end":return e.stop()}},e)})),a.onRow=function(e){return{onClick:function(t){"\u8d85\u7ea7\u7ba1\u7406\u5458"===e.roleName?a.setState({role:{}}):a.setState({role:e})}}},a.addRole=function(){a.form.validateFields(function(){var e=Object(h.a)(g.a.mark(function e(t,n){var r,o,s,c,i,l,u,d,p,f,h,y,v,b,w;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=42;break}if(r=n.roleName,o=ae.getStaff().staff.username,a.setState({isShowAdd:!1}),a.form.resetFields(),!a.isUpdateRoleName){e.next=35;break}return s=a.state,c=s.role,i=s.roles,c.roleName=r,e.next=10,G(c);case 10:if(0!==e.sent.status){e.next=33;break}for(l=!0,u=!1,d=void 0,e.prev=15,p=i[Symbol.iterator]();!(l=(f=p.next()).done);l=!0)(h=f.value).roleId===c.roleId&&(h.roleName=r);e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),u=!0,d=e.t0;case 23:e.prev=23,e.prev=24,l||null==p.return||p.return();case 26:if(e.prev=26,!u){e.next=29;break}throw d;case 29:return e.finish(26);case 30:return e.finish(23);case 31:a.setState(function(e){return{roles:Object(tt.a)(e.roles)}}),a.isUpdateRoleName=!1;case 33:e.next=40;break;case 35:return y=Se(Date.now()),e.next=38,$({roleName:r,createTime:y,authName:o,authTime:y});case 38:0===(v=e.sent).status?(b=v.data,w=We.showCurrentPage(a.state.roles.length+1,_e),a.setState(function(e){return{roles:[].concat(Object(tt.a)(e.roles),[b]),role:Object(Je.a)({},b),currentPage:w}})):m.a.error("\u6dfb\u52a0\u89d2\u8272\u5931\u8d25: "+v.msg);case 40:e.next=43;break;case 42:m.a.error("".concat(a.isUpdateRoleName?"\u66f4\u65b0":"\u6dfb\u52a0","\u64cd\u4f5c\u5931\u8d25"));case 43:case"end":return e.stop()}},e,null,[[15,19,23,31],[24,,26,30]])}));return function(t,a){return e.apply(this,arguments)}}())},a.updateRole=Object(h.a)(g.a.mark(function e(){var t,n,r,o,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isShowAuth:!1}),t=a.state,n=t.role,r=t.roles,o=a.auth.current.getMenus(),n.menus=o.join("#"),n.authTime=Se(Date.now()),n.authName=ae.getStaff().staff.username,e.next=8,G(n);case 8:0===e.sent.status&&(n.roleId===ae.getStaff().staff.roleId?(ae.removeUser(),te.removeUser(),a.props.history.replace("/login"),m.a.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u6210\u529f")):(m.a.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"),s=r.findIndex(function(e){return e.roleId===n.roleId}),r[s]=n,a.setState({roles:Object(tt.a)(r),role:Object(Je.a)({},n)})));case 10:case"end":return e.stop()}},e)})),a.deleteRole=function(){var e=a.state,t=e.role,n=e.roles,r="\u786e\u5b9a\u5220\u9664\u89d2\u8272".concat(t.roleName,"?");Ve.confirmModel(r,Object(h.a)(g.a.mark(function e(){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t.roleId);case 2:if(0===e.sent.status){for(r=0;r<n.length;r++)n[r].roleId===t.roleId&&n.splice(r,1);a.setState(function(e){return{roles:Object(tt.a)(e.roles),role:{}}})}case 4:case"end":return e.stop()}},e)})))},a.paginationChange=function(e){a.setState({currentPage:e,role:{}})},a.updateRoleName=function(){a.setState({isShowAdd:!0}),a.isUpdateRoleName=!0},a.auth=o.a.createRef(),a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){this.initColumn()}},{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){var e=this,t=this.state,a=t.roles,n=t.role,r=t.isShowAdd,s=t.isShowAuth,c=t.currentPage,i=this.isUpdateRoleName?"\u4fee\u6539\u89d2\u8272":"\u6dfb\u52a0\u89d2\u8272",u=o.a.createElement("span",null,o.a.createElement(l.a,{type:"primary",onClick:function(){return e.setState({isShowAdd:!0})}},"\u521b\u5efa\u89d2\u8272")," ","\xa0\xa0",o.a.createElement(l.a,{type:"primary",disabled:!n.roleId,onClick:function(){return e.setState({isShowAuth:!0})}},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"),"\xa0\xa0",o.a.createElement(l.a,{type:"primary",disabled:!n.roleId,onClick:this.updateRoleName},"\u4fee\u6539\u89d2\u8272"),"\xa0\xa0",o.a.createElement(l.a,{type:"danger",disabled:!n.roleId,onClick:this.deleteRole},"\u5220\u9664"));return o.a.createElement(Re.a,{title:u},o.a.createElement(Ue.a,{bordered:!0,rowKey:"roleId",dataSource:a,columns:this.columns,pagination:{size:"small",defaultPageSize:_e,showQuickJumper:!0,showSizeChanger:!0,current:c,pageSizeOptions:[""+_e,""+2*_e,""+3*_e,""+4*_e],showTotal:We.showTotal,onChange:this.paginationChange},rowSelection:{type:"radio",selectedRowKeys:[n.roleId],getCheckboxProps:function(e){return{disabled:"\u8d85\u7ea7\u7ba1\u7406\u5458"===e.roleName,name:e.roleName}},onSelect:function(t){e.setState({role:t})}},onRow:this.onRow}),o.a.createElement(be.a,{title:i,visible:r,onOk:this.addRole,onCancel:function(){e.setState({isShowAdd:!1}),e.form.resetFields(),e.isUpdateRoleName=!1}},o.a.createElement(gt,{setForm:function(t){return e.form=t},roleName:n.roleName,isUpdateRoleName:this.isUpdateRoleName})),o.a.createElement(be.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:s,onOk:this.updateRole,onCancel:function(){e.setState({isShowAuth:!1})}},o.a.createElement(bt,{ref:this.auth,role:n})))}}]),t}(r.Component),Et=a(152),kt=a.n(Et),St=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10]},a.update=function(){a.setState(function(e){return{sales:e.sales.map(function(e){return e+1}),stores:e.stores.reduce(function(e,t){return e.push(t-1),e},[])}})},a.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e},{name:"\u5e93\u5b58",type:"bar",data:t}]}},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores;return o.a.createElement("div",null,o.a.createElement(Re.a,null,o.a.createElement(l.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),o.a.createElement(Re.a,{title:"\u67f1\u72b6\u56fe\u4e00"},o.a.createElement(kt.a,{option:this.getOption(t,a)})))}}]),t}(r.Component),Ct=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).getOption=function(){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},a.getOption2=function(){return{backgroundColor:"#2c343c",title:{text:"Customized Pie",left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:274,name:"\u8054\u76df\u5e7f\u544a"},{value:235,name:"\u89c6\u9891\u5e7f\u544a"},{value:400,name:"\u641c\u7d22\u5f15\u64ce"}].sort(function(e,t){return e.value-t.value}),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Re.a,{title:"\u997c\u56fe\u4e00"},o.a.createElement(kt.a,{option:this.getOption(),style:{height:300}})),o.a.createElement(Re.a,{title:"\u997c\u56fe\u4e8c"},o.a.createElement(kt.a,{option:this.getOption2(),style:{height:300}})))}}]),t}(r.Component),xt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10]},a.update=function(){a.setState(function(e){return{sales:e.sales.map(function(e){return e+1}),stores:e.stores.reduce(function(e,t){return e.push(t-1),e},[])}})},a.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores;return o.a.createElement("div",null,o.a.createElement(Re.a,null,o.a.createElement(l.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),o.a.createElement(Re.a,{title:"\u6298\u7ebf\u56fe\u4e00"},o.a.createElement(kt.a,{option:this.getOption(t,a)})))}}]),t}(r.Component),Ot=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).renderMap=function(){a.map=new window.BMap.Map("address"),a.map.centerAndZoom(new window.BMap.Point(104.2064182883,30.5668503008),11),a.map.addControl(new window.BMap.MapTypeControl({mapTypes:[window.BMAP_NORMAL_MAP,window.BMAP_HYBRID_MAP]})),(new window.BMap.LocalCity).get(a.myAddress),a.map.enableScrollWheelZoom(!0)},a.myAddress=function(e){var t=e.name;a.map.setCenter(t)},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){this.renderMap()}},{key:"render",value:function(){return o.a.createElement(Re.a,null,o.a.createElement("div",{id:"address",style:{width:"100%",height:"550px"}}))}}]),t}(r.Component),jt=(a(1111),a(552)),Nt=(a(1113),a(551)),It=a(260),_t=function(e){function t(e){var a;Object(se.a)(this,t),(a=Object(ie.a)(this,Object(le.a)(t).call(this,e))).closePreview=function(){return a.setState({showPreview:!1})},a.previewImg=function(){var e=Object(h.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({previewImage:t.url||t.preview,showPreview:!0});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleUploadChange=function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r,o,s,c,i,l,u,d;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,r=t.fileList,"done"!==n.status){e.next=6;break}0===(o=n.response).status?(s=o.data,c=s.fileName,i=s.url,(n=r[r.length-1]).name=c,n.url=i):m.a.error(o.msg),e.next=15;break;case 6:if("removed"!==n.status){e.next=15;break}if(l=a.props.isUpdate,console.log(l),l){e.next=15;break}return u=n.name,e.next=13,q({fileName:u});case 13:0===(d=e.sent).status&&m.a.success(d.msg);case 15:a.setState({fileList:r});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getImgs=function(){return a.state.fileList.map(function(e){return e.name})};var n=a.props.imgs,r=[];return n&&n.length>0&&(r=n.map(function(e,t){return{uid:-t,name:e,status:"done",url:Pe+e}})),a.state={showPreview:!1,previewImage:"",fileList:r},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showPreview,a=e.previewImage,n=e.fileList,r=o.a.createElement("div",null,o.a.createElement(p.a,{type:"plus"}),o.a.createElement("div",{className:"ant-upload-text"},"Upload"));return o.a.createElement("div",{className:"clearfix"},o.a.createElement(re.a,{action:"/product/img/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:n,onPreview:this.previewImg,onChange:this.handleUploadChange},n.length>=8?null:r),o.a.createElement(be.a,{visible:t,footer:null,onCancel:this.closePreview},o.a.createElement("img",{alt:"\u6dfb\u52a0/\u4fee\u6539\u5546\u54c1\u9884\u89c8",style:{width:"100%"},src:a})))}}]),t}(r.Component),Pt=(a(1115),a(1116),a(209)),Tt=a.n(Pt),At=a(548),Mt=a.n(At);Tt.a.use(Mt()({includeEditors:["editor-with-color-picker"],theme:"light"}));var Rt=function(e){function t(e){var a;Object(se.a)(this,t),(a=Object(ie.a)(this,Object(le.a)(t).call(this,e))).preview=function(){window.previewWindow&&window.previewWindow.close(),window.previewWindow=window.open(),window.previewWindow.document.write(a.buildPreviewHtml()),window.previewWindow.document.close()},a.contentChange=function(e){a.setState({editorState:e})},a.uploadMedia=function(e){var t,a=e.file,n=/image\/\*/,r=a.type;t=n.test(r)?"/product/img/upload":"/product/vedio/upload";var o=new XMLHttpRequest,s=new FormData;o.upload.addEventListener("progress",function(t){e.progress(t.loaded/t.total*100)},!1),o.addEventListener("load",function(t){var a,s=JSON.parse(o.responseText);n.test(r),a=Object.assign(s.data),e.success({url:a.url,name:a.fileName,meta:{controls:!0,poster:a.poster}})},!1),o.addEventListener("err",function(t){e.error({msg:"unable to upload."})},!1),s.append("image",e.file),o.open("POST",t,!0),o.send(s)},a.myValidateFn=function(e){return e.size<4096e4},a.hooksConfig={"remove-medias":function(){var e=Object(h.a)(g.a.mark(function e(t){var a,n,r,o,s,c,i,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0,n=!0,r=!1,o=void 0,e.prev=4,s=t[Symbol.iterator]();case 6:if(n=(c=s.next()).done){e.next=15;break}return i=c.value,l=i.name,e.next=11,q({fileName:l});case 11:a=e.sent;case 12:n=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=!0,o=e.t0;case 21:e.prev=21,e.prev=22,n||null==s.return||s.return();case 24:if(e.prev=24,!r){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:0===a.status&&m.a.success(a.msg);case 30:case"end":return e.stop()}},e,null,[[4,17,21,29],[22,,24,28]])}));return function(t){return e.apply(this,arguments)}}()},a.getProductDetail=function(){return a.state.editorState.toHTML()};var n=a.props.productDetail;if(n){var r=Tt.a.createEditorState(n);a.state={editorState:r}}else a.state={editorState:Tt.a.createEditorState()};return a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"buildPreviewHtml",value:function(){return'\n          <!Doctype html>\n          <html>\n            <head>\n              <title>Preview Content</title>\n              <style>\n                html,body{\n                  height: 100%;\n                  margin: 0;\n                  padding: 0;\n                  overflow: auto;\n                  background-color: #f1f2f3;\n                }\n                .container{\n                  box-sizing: border-box;\n                  width: 1000px;\n                  max-width: 100%;\n                  min-height: 100%;\n                  margin: 0 auto;\n                  padding: 30px 20px;\n                  overflow: hidden;\n                  background-color: #fff;\n                  border-right: solid 1px #eee;\n                  border-left: solid 1px #eee;\n                }\n                .container img,\n                .container audio,\n                .container video{\n                  max-width: 100%;\n                  height: auto;\n                }\n                .container p{\n                  white-space: pre-wrap;\n                  min-height: 1em;\n                }\n                .container pre{\n                  padding: 15px;\n                  background-color: #f1f1f1;\n                  border-radius: 5px;\n                }\n                .container blockquote{\n                  margin: 0;\n                  padding: 15px;\n                  background-color: #f1f1f1;\n                  border-left: 3px solid #d1d1d1;\n                }\n              </style>\n            </head>\n            <body>\n              <div class="container">'.concat(this.state.editorState.toHTML(),"</div>\n            </body>\n          </html>\n        ")}},{key:"render",value:function(){var e=this.state.editorState,t=[{key:"custom-button",type:"button",text:"\u9884\u89c8",onClick:this.preview}];return o.a.createElement("div",null,o.a.createElement("div",{className:"editor-wrapper"},o.a.createElement(Tt.a,{style:{border:"1px solid #d9d9d9"},contentStyle:{height:"300px"},placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u8be6\u60c5",value:e,onChange:this.contentChange,excludeControls:["code"],extendControls:t,media:{uploadFn:this.uploadMedia,validateFn:this.myValidateFn},hooks:this.hooksConfig,id:"editor-with-color-picker"})))}}]),t}(r.Component),Ft=u.a.Item,Ut=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(ie.a)(this,Object(le.a)(t).call(this,e))).state={categoryOptions:[],secondaryId:""},a.getCategorys=Object(h.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:0===(t=e.sent).status&&a.initOptions(t.data);case 4:case"end":return e.stop()}},e)})),a.initOptions=function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r,o,s,c,i,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.map(function(e){return{value:e.id,label:e.name,isLeaf:!1}}),r=Object(It.a)(a),o=r.isUpdate,s=r.product,!o){e.next=10;break}return e.next=5,T(s.goods_category_id);case 5:0===(i=e.sent).status&&(l=i.data,c=l.map(function(e){return{value:e.id,label:e.name,isLeaf:!0}})),n.find(function(e){return e.value===s.goods_category_id}).children=c,a.getSecondaryCategoryId();case 10:a.setState({categoryOptions:n});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getSecondaryCategoryId=Object(h.a)(g.a.mark(function e(){var t,n,r,o,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isUpdate){e.next=6;break}return t=a.product,n=t.goods_category_id,r=t.goods_category_name,e.next=4,F({goods_category_id:n,goods_category_name:r});case 4:0===(o=e.sent).status&&(s=o.data,a.setState({secondaryId:s}));case 6:case"end":return e.stop()}},e)})),a.onChange=function(e,t){console.log(e,t)},a.loadSecondaryCategoryData=function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[t.length-1],e.next=3,T(n.value);case 3:0===(r=e.sent).status&&(o=r.data,n.children=o.map(function(e){return{value:e.id,label:e.name,isLeaf:!0}})),a.setState({options:Object(tt.a)(a.state.categoryOptions)});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.submitProduct=function(e){e.preventDefault(),a.props.form.validateFields(function(){var e=Object(h.a)(g.a.mark(function e(t,n){var r,o,s,c,i,l,u,d,p,f,h,y,v,b,w,E,k,S,C,x,O,j,N;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.uploadImg.current.getImgs(),o=a.productDetailRT.current.getProductDetail(),"[]"!==JSON.stringify(r)){e.next=5;break}return m.a.error("\u5546\u54c1\u56fe\u7247\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 5:if("<p></p>"!==o){e.next=8;break}return m.a.error("\u5546\u54c1\u8be6\u60c5\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 8:if(t){e.next=72;break}s=a.state.categoryOptions,c=r.join("#"),i=n.goods_category_id[0],d=!0,p=!1,f=void 0,e.prev=15,h=s[Symbol.iterator]();case 17:if(d=(y=h.next()).done){e.next=43;break}if((v=y.value).value!==i){e.next=40;break}for(u=v.label,b=!0,w=!1,E=void 0,e.prev=24,k=v.children[Symbol.iterator]();!(b=(S=k.next()).done);b=!0)(C=S.value).value===n.goods_category_id[1]&&(l=C.label);e.next=32;break;case 28:e.prev=28,e.t0=e.catch(24),w=!0,E=e.t0;case 32:e.prev=32,e.prev=33,b||null==k.return||k.return();case 35:if(e.prev=35,!w){e.next=38;break}throw E;case 38:return e.finish(35);case 39:return e.finish(32);case 40:d=!0,e.next=17;break;case 43:e.next=49;break;case 45:e.prev=45,e.t1=e.catch(15),p=!0,f=e.t1;case 49:e.prev=49,e.prev=50,d||null==h.return||h.return();case 52:if(e.prev=52,!p){e.next=55;break}throw f;case 55:return e.finish(52);case 56:return e.finish(49);case 57:if(!a.isUpdate){e.next=64;break}return O=a.product.goods_id,e.next=61,J(Object(Je.a)({},n,{goods_details:o,goods_img:c,goods_category_id:i,goods_category_name:l,goods_id:O,goods_first_categoryName:u}));case 61:x=e.sent,e.next=71;break;case 64:return j=ae.getStaff().staff.staffId,0,0,N=Number(ke(Date.now())),e.next=70,B(Object(Je.a)({},n,{goods_details:o,goods_img:c,goods_category_id:i,goods_hot:0,goods_status:0,goods_by_user_id:j,goods_publish_time:N,goods_category_name:l,goods_first_categoryName:u}));case 70:x=e.sent;case 71:0===x.status?(m.a.success("".concat(a.isUpdate?"\u4fee\u6539":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f")),a.props.history.goBack()):m.a.error("".concat(a.isUpdate?"\u4fee\u6539":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f"));case 72:case"end":return e.stop()}},e,null,[[15,45,49,57],[24,28,32,40],[33,,35,39],[50,,52,56]])}));return function(t,a){return e.apply(this,arguments)}}())},a.uploadImg=o.a.createRef(),a.productDetailRT=o.a.createRef(),a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(sessionStorage.getItem("product"));this.isUpdate=!!e,this.product=e||{}}},{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"componentWillUnmount",value:function(){sessionStorage.removeItem("product")}},{key:"render",value:function(){var e=this,t=this.state,a=t.categoryOptions,n=t.secondaryId,r=this.product,s=r.goods_title,c=r.goods_price,i=r.goods_img,m=r.goods_details,f=r.goods_description,g=r.goods_contact_qq,h=r.goods_contact_phone,y=r.goods_category_id,v=r.goods_id,b=i?i.split("#"):[],w=[];this.isUpdate&&(w.push(y),w.push(n));var E=o.a.createElement("span",null,o.a.createElement(we,null,o.a.createElement(p.a,{type:"arrow-left",style:{marginRight:10,fontSize:20,verticalAlign:"center"},onClick:function(){return e.props.history.goBack()}})),o.a.createElement("span",null,"\u6dfb\u52a0\u5546\u54c1")),k=this.props.form.getFieldDecorator;return o.a.createElement("div",null,o.a.createElement(Re.a,{title:E},o.a.createElement(u.a,{labelCol:{span:3},wrapperCol:{span:10}},o.a.createElement(Ft,{label:"\u5546\u54c1\u540d\u79f0"},k("goods_title",{initialValue:s,rules:[{required:!0,message:"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",whitespace:!0}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0",allowClear:!0}))),o.a.createElement(Ft,{label:"\u5546\u54c1\u4ef7\u683c"},k("goods_price",{initialValue:c,rules:[{required:!0,message:"\u5546\u54c1\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"}]})(o.a.createElement(Nt.a,{style:{width:"100%"},formatter:function(e){return"\xa5 ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\xa5\s?|(,*)/g,"")},min:0,max:1e7}))),o.a.createElement(Ft,{label:"\u5546\u54c1\u63cf\u8ff0"},k("goods_description",{initialValue:f,rules:[{required:!0,message:"\u5546\u54c1\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a"}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",allowClear:!0}))),o.a.createElement(Ft,{label:"\u5546\u54c1\u5206\u7c7b"},k("goods_category_id",{initialValue:w,rules:[{required:!0,message:"\u5546\u54c1\u54c1\u7c7b\u4e0d\u80fd\u4e3a\u7a7a"}]})(o.a.createElement(jt.a,{expandTrigger:"hover",placeholder:"\u8bf7\u6307\u5b9a\u5546\u54c1\u5206\u7c7b",options:a,loadData:this.loadSecondaryCategoryData,onChange:this.onChange,allowClear:!0}))),o.a.createElement(Ft,{label:"\u7535\u8bdd\u53f7\u7801"},k("goods_contact_phone",{initialValue:h,validateTrigger:"onBlur",rules:[{required:!0,message:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a",whitespace:!0},{pattern:/^1[3456789]\d{9}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",allowClear:!0}))),o.a.createElement(Ft,{label:"QQ\u53f7"},k("goods_contact_qq",{initialValue:g,validateTrigger:"onBlur",rules:[{required:!0,message:"QQ\u53f7\u4e0d\u80fd\u4e3a\u7a7a",whitespace:!0},{pattern:/^[1-9][0-9]{4,9}$/gim,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684QQ\u53f7\u7801"}]})(o.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165QQ\u53f7",allowClear:!0}))),o.a.createElement(Ft,{label:"\u5546\u54c1\u56fe\u7247",required:!0},o.a.createElement(_t,{ref:this.uploadImg,imgs:b,isUpdate:this.isUpdate,productId:v})),o.a.createElement(Ft,{label:"\u5546\u54c1\u8be6\u60c5",labelCol:{span:3},wrapperCol:{span:18},required:!0},o.a.createElement(Rt,{ref:this.productDetailRT,productDetail:m})),o.a.createElement(Ft,{wrapperCol:{offset:3}},o.a.createElement(l.a,{type:"primary",onClick:this.submitProduct},"\u63d0\u4ea4")))))}}]),t}(r.Component),Dt=u.a.create()(Ut),Kt=(a(1289),a(353)),Lt=(a(1291),Kt.a.Item),zt=[{path:"/login",exact:!0,component:ne},{path:"/",component:Me,routes:[{path:"/home",component:Fe},{path:"/products/category",component:qe},{path:"/products/product",component:Be,routes:[{path:"/products/product/showproduct",component:et},{path:"/products/product/editproduct",component:Dt},{path:"/products/product/productdetail",component:function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ie.a)(this,(e=Object(le.a)(t)).call.apply(e,[this].concat(r)))).state={userMsg:{},previewVisible:!1,previewImage:""},a.showBigImg=function(e){a.setState({previewVisible:!0,previewImage:Pe+e})},a.getPublishGoodsUserMsg=function(){var e=Object(h.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({goods_by_user_id:t});case 2:0===(n=e.sent).status&&a.setState({userMsg:n.data});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleCancel=function(){a.setState({previewVisible:!1})},a}return Object(ue.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){null===sessionStorage.getItem("product")?this.product={}:this.product=JSON.parse(sessionStorage.getItem("product"))}},{key:"componentDidMount",value:function(){var e=this.product.goods_by_user_id;this.getPublishGoodsUserMsg(e)}},{key:"componentWillUnmount",value:function(){sessionStorage.removeItem("product")}},{key:"render",value:function(){var e=this,t=this.state.userMsg,a=t.user_name,n=t.user_status,r=t.user_img,s=this.state,c=s.previewVisible,i=s.previewImage,l=this.product,u=l.goods_title,d=l.goods_status,m=l.goods_publish_time,f=l.goods_price,g=l.goods_img,h=l.goods_hot,y=l.goods_details,v=l.goods_description,b=l.goods_contact_qq,w=l.goods_contact_phone,E=l.goods_category_name,k=d?"\u4e0b\u67b6":"\u5728\u552e",S=n?"\u672a\u8ba4\u8bc1":"\u5df2\u8ba4\u8bc1",C=g?g.split("#"):[],x={width:"33.3%",textAlign:"center",padding:"10px"},O={width:"50%"},j=o.a.createElement("span",null,o.a.createElement(we,null,o.a.createElement(p.a,{type:"arrow-left",style:{marginRight:10,fontSize:20,verticalAlign:"center"},onClick:function(){return e.props.history.goBack()}})),o.a.createElement("span",null,"\u5546\u54c1\u8be6\u60c5"));return o.a.createElement(Re.a,{title:j,bordered:!1,className:"product"},o.a.createElement(Re.a,null,o.a.createElement(Re.a.Grid,{style:O}," ",o.a.createElement(Kt.a,{size:"small",split:!1},o.a.createElement(Lt,null,o.a.createElement("p",{className:"goods-showtitle"},u)),o.a.createElement(Lt,null,o.a.createElement("div",{className:"goods-showprice"},"\xa0\xa0\xa0\xa0\uffe5",o.a.createElement("span",{className:"goods-showpircenum"},f))),o.a.createElement(Lt,null,o.a.createElement(Lt.Meta,{avatar:o.a.createElement(oe.a,{src:Pe+r}),title:a,description:S})),o.a.createElement(Lt,null,"\u5546\u54c1\u63cf\u8ff0\uff1a\xa0\xa0",v),o.a.createElement(Lt,null,"\u5546\u54c1\u5206\u7c7b\uff1a\xa0\xa0",E),o.a.createElement(Lt,null,"\u8054\u7cfb\u7535\u8bdd\uff1a\xa0\xa0",w),o.a.createElement(Lt,null,"\u8054\u7cfbQQ\uff1a \xa0\xa0\xa0",b),o.a.createElement(Lt,null,"\u53d1\u5e03\u65f6\u95f4\uff1a\xa0\xa0",m),o.a.createElement(Lt,null,"\u70b9\u51fb\u91cf\uff1a \xa0\xa0\xa0\xa0",h),o.a.createElement(Lt,null,"\u5546\u54c1\u72b6\u6001\uff1a\xa0\xa0",k))),o.a.createElement(Re.a.Grid,{style:O},"\u5546\u54c1\u56fe\u7247\uff1a",o.a.createElement("br",null),o.a.createElement(Re.a,{className:"productDetailImg"},C.map(function(t,a){return o.a.createElement(Re.a.Grid,{style:x,key:a},o.a.createElement("img",{src:Pe+t,key:a,alt:"\u5546\u54c1\u56fe\u7247",onClick:function(){e.showBigImg(t)}}))})),"\u5546\u54c1\u8be6\u60c5\uff1a",o.a.createElement(Re.a,{bordered:!1},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:y},className:"detail"})),o.a.createElement(be.a,{visible:c,footer:null,onCancel:this.handleCancel},o.a.createElement("img",{alt:"\u5546\u54c1\u5927\u56fe",style:{width:"100%"},src:i})))))}}]),t}(r.Component)}]},{path:"/user",component:pt},{path:"/role",component:wt},{path:"/charts/bar",component:St},{path:"/charts/pie",component:Ct},{path:"/charts/line",component:xt},{path:"/address",component:Ot}]}];Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(n.a,{locale:i.a},o.a.createElement(function(e){return o.a.createElement(ge.a,null,o.a.createElement(ee.d,null,zt.map(function(e,t){return o.a.createElement(pe,Object.assign({},e,{key:t}))})))},null)),document.getElementById("mallmanasys")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},556:function(e,t,a){e.exports=a(1292)},570:function(e,t,a){},711:function(e,t,a){},721:function(e,t,a){},722:function(e,t,a){},723:function(e,t,a){},724:function(e,t,a){},767:function(e,t,a){},779:function(e,t,a){},802:function(e,t,a){}},[[556,1,2]]]);
//# sourceMappingURL=main.a96c3cc1.chunk.js.map